const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-B5bK_26z.js","assets/vendor-DnveWo0P.css"])))=>i.map(i=>d[i]);
import{i as T,c as P,g as R,a as F,r as q,m as o,s as U,b as z,h as O,d as j,e as D}from"./assets/favorites-CqLlEf-U.js";import{a as E,i as S}from"./assets/vendor-B5bK_26z.js";const N=async e=>{const{data:t}=await E.post("/subscription",{email:e});return t},W=async e=>{try{const{message:t}=await N(e);return S.show({...T.success,message:t,timeout:5e3}),t}catch(t){const{status:n}=t,r=P[n]||`Unexpected error (${t.message||"unknown"})`;throw S.show({...T.error,message:r}),{code:n,message:r}}},V=async e=>{const{data:t}=await E.get("/filters",{params:e});return t},G=async e=>{const{data:t}=await E.get("/exercises",{params:e});return t},J=async e=>{const{data:t}=await E.get(`/exercises/${e}`);return t},Z=async e=>{try{return await G(e)}catch(t){const{status:n}=t,r=F[n]||`Unexpected error (${t.message||"unknown"})`;throw{code:n,message:r}}},K=async e=>{try{return await J(e)}catch(t){const{status:n}=t,r=R[n]||`Unexpected error (${t.message||"unknown"})`;throw{code:n,message:r}}},a={filter:"Muscles",category:null,page:1,limit:12,keyword:""},Q={"body parts":"bodypart",muscles:"muscles",equipment:"equipment"};function X(e,t){a.category=e,a.filter=t,a.page=1,a.keyword="";const n=document.getElementById("search-input");n&&(n.value="");const r=document.getElementById("current-category");r&&(r.textContent=` / ${te(e)}`),Y()}async function Y(){const e=document.getElementById("exercise-cards-container");e.innerHTML="<p>Loading exercises...</p>";try{const t=Q[a.filter.toLowerCase()];if(!t){console.warn("❗ Невідомий фільтр:",a.filter);return}const n={[t]:a.category,keyword:a.keyword,page:a.page,limit:a.limit},s=(await Z(n)).results;if(!s.length){e.innerHTML="<p>No exercises found.</p>";return}e.innerHTML=s.map(ee).join("")}catch(t){e.innerHTML="<p>Error loading exercises.</p>",console.error("❌ Exercise loading error:",t.message)}}function ee(e){return`
   <div class="workout-card ex-card">
        <div class="workout-header">
          <span class="workout-badge">WORKOUT</span>
          <button class="start-button" data-exercise-id=${e._id}>Start ➔</button>
        </div>
        <div class="workout-body">
          <span class="workout-icon-running">
            <img
              src="../img/quote_icon_1.svg"
              width="24px"
              height="24px"
              alt="Running Icon"
            />
          </span>        
          <h3 class="workout-name">${e.name}</h3>
          <p class="workout-stats">
            Burned calories: ${e.burnedCalories} / ${e.time} min
            <br>
            Body part: ${e.bodyPart} <br>  Target: ${e.target}
          </p>
        </div>
      </div>
  `}function te(e){return e.charAt(0).toUpperCase()+e.slice(1)}const d=document.getElementById("exercise-cards-container"),re={muscles:"Muscles","body parts":"Body parts",equipment:"Equipment"};let w=[];function ne(){document.querySelectorAll(".filter-btn").forEach(t=>{t.addEventListener("click",n=>{var s;const r=n.currentTarget.dataset.type.toLowerCase().trim();a.filter=r,a.page=1,a.category=null,a.keyword="",(s=document.querySelector(".filter-btn.active"))==null||s.classList.remove("active"),t.classList.add("active"),B(a.filter)})}),oe().then(()=>{var t;a.filter="muscles",(t=document.querySelector('.filter-btn[data-type="Muscles"]'))==null||t.classList.add("active"),B(a.filter)})}async function oe(){d.innerHTML="<p>Loading categories...</p>";try{w=(await V({page:1,limit:100})).results;const t=w.map(x).join("");d.innerHTML=t,b()}catch(e){console.error("❌ Категорії не завантажено:",e.message),d.innerHTML="<p>Error loading categories.</p>"}se()}function B(e){d.innerHTML="<p>Loading filtered categories...</p>";const t=re[e];if(!t){console.warn("❗ Невідомий фільтр:",e),d.innerHTML="<p>No filter selected.</p>";return}const n=w.filter(s=>s.filter.trim().toLowerCase()===t.toLowerCase());if(!n.length){d.innerHTML="<p>No categories found for this filter.</p>";return}const r=n.map(x).join("");d.innerHTML=r,b()}function b(){document.querySelectorAll(".category-card").forEach(e=>{e.addEventListener("click",()=>{var r;const t=e.dataset.name,n=(r=e.dataset.type)==null?void 0:r.toLowerCase().trim();X(t,n)})})}function x(e){return`
    <div class="category-card" 
     data-name="${e.name}" 
     data-type="${e.filter}" 
     data-id="${e.id}">
	 <div class="overlay"></div>
  <div class="category-card-bg" style="background-image: url('${e.imgURL}')">
    <div class="category-card-text">
      <h3 class="category-card-title">${_(e.name)}</h3>
      <p class="category-card-sub">${_(e.filter)}</p>
    </div>
  </div>
</div>

  `}function se(){const e=document.getElementById("search-input");e&&e.addEventListener("input",t=>{const n=t.target.value.trim().toLowerCase(),r=w.filter(c=>c.name.toLowerCase().startsWith(n));if(!r.length){d.innerHTML="<p>Нічого не знайдено.</p>";return}const s=r.map(x).join("");d.innerHTML=s,b()})}function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ae(e){o.modalTitle.textContent=f(e.name),o.modalRatingValue.textContent=e.rating,o.modalImage.src=e.gifUrl,o.modalImage.alt=e.name,o.modalTarget.textContent=f(e.target),o.modalBodyPart.textContent=f(e.bodyPart),o.modalEquipment.textContent=f(e.equipment),o.modalPopular.textContent=e.popularity,o.modalCalories.textContent=`${e.burnedCalories}/${e.time} min`,o.modalDescription.textContent=e.description,o.stars.forEach((c,i)=>{i<Math.floor(e.rating)?c.classList.add("filled"):c.classList.remove("filled")});const t=JSON.parse(localStorage.getItem("favorites")||"[]"),n=t.some(c=>c._id===e._id);console.log("exercise:",e),console.log("favorites:",t),console.log("isInFavorites:",n),n?U():z();const r=()=>O(t,e);o.favoriteButton.addEventListener("click",r),o.closeModalBtn.addEventListener("click",k);const s=c=>{c.target===o.modalExercises?k():c.target===o.modalRating&&v()};window.addEventListener("click",s),o.modalExercises._windowClickHandler=s,o.modalExercises._favoriteClickHandler=r,ie(o.modalExercises),o.ratingButton.addEventListener("click",v)}function ie(e){e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("show")},10),document.body.style.overflow="hidden"}function v(){o.modalExercises.classList.toggle("hidden"),o.modalExercises.classList.toggle("show"),o.modalRating.classList.toggle("hidden"),o.modalRating.classList.toggle("show")}function k(){o.modalExercises.classList.remove("show"),setTimeout(()=>{o.modalExercises.classList.add("hidden"),document.body.style.overflow=""},300),document.body.style.overflow="",o.closeModalBtn.removeEventListener("click",k),o.favoriteButton.removeEventListener("click",o.modalExercises._favoriteClickHandler),o.ratingButton.removeEventListener("click",v),window.removeEventListener("click",o.modalExercises._windowClickHandler)}q.exercisesContainer.addEventListener("click",async function(e){const t=e.target.closest(".start-button");if(t){const n=t.dataset.exerciseId;if(n)try{const r=await K(n);ae(r)}catch(r){console.error("Error fetching exercise:",r)}}});const u=document.querySelector('[data-modal="rating"]'),m=u==null?void 0:u.querySelector("form"),L=m==null?void 0:m.querySelectorAll('input[name="rating"]'),ce=m==null?void 0:m.querySelector(".rating-value"),C=u==null?void 0:u.querySelector("[data-modal-close]");L==null||L.forEach(e=>{e.addEventListener("change",()=>{ce.textContent=e.value+".0"})});m==null||m.addEventListener("submit",le);function le(e){var i;e.preventDefault();const t=e.target,n=+((i=t.querySelector('[name="rating"]:checked'))==null?void 0:i.value)||0,r=t.querySelector('[name="email"]').value.trim(),s=t.querySelector('[name="comment"]').value.trim();if(!n||!r||!s){iziToast.error({message:"Будь ласка, заповніть всі поля"});return}if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(r)){iziToast.error({message:"Введіть коректний email"});return}fetch("https://httpbin.org/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:n,email:r,comment:s})}).then(l=>{if(!l.ok)throw new Error("Не вдалося надіслати оцінку");M(),iziToast.success({message:"Дякуємо за вашу оцінку!"})}).catch(l=>{iziToast.error({message:l.message})})}C==null||C.addEventListener("click",M);function M(){u==null||u.classList.add("hidden"),v()}const de="modulepreload",ue=function(e){return"/your-energy/"+e},$={},me=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(p=>{if(p=ue(p),p in $)return;$[p]=!0;const h=p.endsWith(".css"),H=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${H}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":de,h||(g.as="script"),g.crossOrigin="",g.href=p,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((I,A)=>{g.addEventListener("load",I),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&c(l.reason);return t().catch(c)})};class pe{constructor({target:t,path:n="/animations/loader.json",size:r=80,color:s="#000"}){if(this.target=typeof t=="string"?document.querySelector(t):t,!this.target)throw new Error("Target element not found for Loader");this._path=n,this._size=r,this._color=s,this._loaded=!1,this.wrapper=document.createElement("div"),this.wrapper.style.cssText=`
      width: ${r}px;
      height: ${r}px;
      display: none;
      position: relative;
    `,this.animContainer=document.createElement("div"),this.animContainer.style.cssText=`
      width: 100%;
      height: 100%;
    `,this.wrapper.appendChild(this.animContainer),this.target.appendChild(this.wrapper)}async _init(){if(this._loaded)return;const{default:t}=await me(async()=>{const{default:r}=await import("./assets/vendor-B5bK_26z.js").then(s=>s.l);return{default:r}},__vite__mapDeps([0,1]));t.loadAnimation({container:this.animContainer,renderer:"svg",loop:!0,autoplay:!0,path:this._path}).addEventListener("DOMLoaded",()=>{this.animContainer.querySelectorAll("path").forEach(s=>s.setAttribute("fill",this._color))}),this._loaded=!0,await new Promise(r=>setTimeout(r,50))}async show(){await this._init(),this.wrapper.style.display="block"}hide(){this.wrapper.style.display="none"}}document.addEventListener("DOMContentLoaded",()=>{ne()});window.addEventListener("scroll",j);q.scrollToTopBtn.addEventListener("click",D);const y=document.querySelector("#subscribe-form");y&&y.addEventListener("submit",async e=>{e.preventDefault();try{const t=y.email.value;await W(t),y.reset()}catch(t){console.log(t)}});new pe({target:"#red-loader",size:50,color:"red"});document.getElementById("black-btn").addEventListener("click",async()=>{blackLoader.show(),await new Promise(e=>setTimeout(e,3e3)),blackLoader.hide()});
//# sourceMappingURL=index.js.map
