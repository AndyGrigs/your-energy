import{c as F,r as p,g as I,a as $,m as s,s as q,b as H,h as R}from"./assets/favorites-BSkPwvDC.js";import{i as E,a as v,l as A}from"./assets/vendor-M0pO2yrp.js";E.settings({timeout:3e3,transitionIn:"flipInX",transitionOut:"flipOutX",iconColor:"#FFF",color:"#FFF",close:!0,position:"topRight",messageColor:"#FFF",messageSize:"16px",progressBar:!0,progressBarEasing:"linear",maxWidth:"432px",message:"Sorry, something went wrong."});const B=window.location.origin.includes("localhost")||window.location.origin.includes("127.0.0.1"),T={success:{iconUrl:B?"./img/success.svg":"/your-energy/img/success.svg",progressBarColor:"#326101",backgroundColor:"#59A10D"},error:{iconUrl:B?"./img/error.svg":"/your-energy/img/error.svg",progressBarColor:"#B51B1B",backgroundColor:"#EF4040"}},U=async e=>{const{data:t}=await v.post("/subscription",{email:e});return t},z=async e=>{try{const{message:t}=await U(e);return E.show({...T.success,message:t,timeout:5e3}),t}catch(t){const{status:o}=t,r=F[o]||`Unexpected error (${t.message||"unknown"})`;throw E.show({...T.error,message:r}),{code:o,message:r}}};function _(){const e=window.innerHeight/4;window.scrollY>e?p.scrollToTopBtn.classList.remove("invisible"):p.scrollToTopBtn.classList.add("invisible")}function O(){window.scrollTo({top:0,behavior:"smooth"})}const P=async e=>{const{data:t}=await v.get("/filters",{params:e});return t},j=async e=>{const{data:t}=await v.get("/exercises",{params:e});return t},D=async e=>{const{data:t}=await v.get(`/exercises/${e}`);return t},N=async e=>{try{return await j(e)}catch(t){const{status:o}=t,r=$[o]||`Unexpected error (${t.message||"unknown"})`;throw{code:o,message:r}}},W=async e=>{try{return await D(e)}catch(t){const{status:o}=t,r=I[o]||`Unexpected error (${t.message||"unknown"})`;throw{code:o,message:r}}},a={filter:"Muscles",category:null,page:1,limit:12,keyword:""},G={"body parts":"bodypart",muscles:"muscles",equipment:"equipment"};function J(e,t){a.category=e,a.filter=t,a.page=1,a.keyword="";const o=document.getElementById("search-input");o&&(o.value="");const r=document.getElementById("current-category");r&&(r.textContent=` / ${Z(e)}`),V()}async function V(){const e=document.getElementById("exercise-cards-container");e.innerHTML="<p>Loading exercises...</p>";try{const t=G[a.filter.toLowerCase()];if(!t){console.warn("❗ Невідомий фільтр:",a.filter);return}const o={[t]:a.category,keyword:a.keyword,page:a.page,limit:a.limit},n=(await N(o)).results;if(!n.length){e.innerHTML="<p>No exercises found.</p>";return}e.innerHTML=n.map(X).join("")}catch(t){e.innerHTML="<p>Error loading exercises.</p>",console.error("❌ Exercise loading error:",t.message)}}function X(e){return`
   <div class="workout-card ex-card">
        <div class="workout-header">
          <span class="workout-badge">WORKOUT</span>
          <button class="start-button" data-exercise-id=${e._id}>Start ➔</button>
        </div>
        <div class="workout-body">
          <span class="workout-icon-running">
            <img
              src="../img/quote_icon_1.svg"
              width="24px"
              height="24px"
              alt="Running Icon"
            />
          </span>        
          <h3 class="workout-name">${e.name}</h3>
          <p class="workout-stats">
            Burned calories: ${e.burnedCalories} / ${e.time} min
            <br>
            Body part: ${e.bodyPart} <br>  Target: ${e.target}
          </p>
        </div>
      </div>
  `}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}const c=document.getElementById("exercise-cards-container"),K={muscles:"Muscles","body parts":"Body parts",equipment:"Equipment"};let y=[];function Y(){document.querySelectorAll(".filter-btn").forEach(t=>{t.addEventListener("click",o=>{var n;const r=o.currentTarget.dataset.type.toLowerCase().trim();a.filter=r,a.page=1,a.category=null,a.keyword="",(n=document.querySelector(".filter-btn.active"))==null||n.classList.remove("active"),t.classList.add("active"),ee(a.filter)})}),Q()}async function Q(){c.innerHTML="<p>Loading categories...</p>";try{y=(await P({page:1,limit:100})).results;const t=y.map(C).join("");c.innerHTML=t,k()}catch(e){console.error("❌ Категорії не завантажено:",e.message),c.innerHTML="<p>Error loading categories.</p>"}te()}function ee(e){c.innerHTML="<p>Loading filtered categories...</p>";const t=K[e];if(!t){console.warn("❗ Невідомий фільтр:",e),c.innerHTML="<p>No filter selected.</p>";return}const o=y.filter(n=>n.filter.trim().toLowerCase()===t.toLowerCase());if(!o.length){c.innerHTML="<p>No categories found for this filter.</p>";return}const r=o.map(C).join("");c.innerHTML=r,k()}function k(){document.querySelectorAll(".category-card").forEach(e=>{e.addEventListener("click",()=>{var r;const t=e.dataset.name,o=(r=e.dataset.type)==null?void 0:r.toLowerCase().trim();J(t,o)})})}function C(e){return`
    <div class="category-card" 
     data-name="${e.name}" 
     data-type="${e.filter}" 
     data-id="${e.id}">
	 <div class="overlay"></div>
  <div class="category-card-bg" style="background-image: url('${e.imgURL}')">
    <div class="category-card-text">
      <h3 class="category-card-title">${x(e.name)}</h3>
      <p class="category-card-sub">${x(e.filter)}</p>
    </div>
  </div>
</div>

  `}function te(){const e=document.getElementById("search-input");e&&e.addEventListener("input",t=>{const o=t.target.value.trim().toLowerCase(),r=y.filter(i=>i.name.toLowerCase().startsWith(o));if(!r.length){c.innerHTML="<p>Нічого не знайдено.</p>";return}const n=r.map(C).join("");c.innerHTML=n,k()})}function x(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}function oe(e){s.modalTitle.textContent=m(e.name),s.modalRatingValue.textContent=e.rating,s.modalImage.src=e.gifUrl,s.modalImage.alt=e.name,s.modalTarget.textContent=m(e.target),s.modalBodyPart.textContent=m(e.bodyPart),s.modalEquipment.textContent=m(e.equipment),s.modalPopular.textContent=e.popularity,s.modalCalories.textContent=`${e.burnedCalories}/${e.time} min`,s.modalDescription.textContent=e.description,s.stars.forEach((i,u)=>{u<Math.floor(e.rating)?i.classList.add("filled"):i.classList.remove("filled")});const t=JSON.parse(localStorage.getItem("favorites")||"[]"),o=t.some(i=>i._id===e._id);console.log("exercise:",e),console.log("favorites:",t),console.log("isInFavorites:",o),o?q():H();const r=()=>R(t,e);s.favoriteButton.addEventListener("click",r),s.closeModalBtn.addEventListener("click",b);const n=i=>{i.target===s.modalExercises?b():i.target===s.modalRating&&f()};window.addEventListener("click",n),s.modalExercises._windowClickHandler=n,s.modalExercises._favoriteClickHandler=r,re(s.modalExercises),s.ratingButton.addEventListener("click",f)}function re(e){e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("show")},10),document.body.style.overflow="hidden"}function f(){s.modalExercises.classList.toggle("hidden"),s.modalExercises.classList.toggle("show"),s.modalRating.classList.toggle("hidden"),s.modalRating.classList.toggle("show")}function b(){s.modalExercises.classList.remove("show"),setTimeout(()=>{s.modalExercises.classList.add("hidden"),document.body.style.overflow=""},300),document.body.style.overflow="",s.closeModalBtn.removeEventListener("click",b),s.favoriteButton.removeEventListener("click",s.modalExercises._favoriteClickHandler),s.ratingButton.removeEventListener("click",f),window.removeEventListener("click",s.modalExercises._windowClickHandler)}p.exercisesContainer.addEventListener("click",async function(e){const t=e.target.closest(".start-button");if(t){const o=t.dataset.exerciseId;if(o)try{const r=await W(o);oe(r)}catch(r){console.error("Error fetching exercise:",r)}}});const l=document.querySelector('[data-modal="rating"]'),d=l==null?void 0:l.querySelector("form"),w=d==null?void 0:d.querySelectorAll('input[name="rating"]'),se=d==null?void 0:d.querySelector(".rating-value"),L=l==null?void 0:l.querySelector("[data-modal-close]");w==null||w.forEach(e=>{e.addEventListener("change",()=>{se.textContent=e.value+".0"})});d==null||d.addEventListener("submit",ne);function ne(e){var u;e.preventDefault();const t=e.target,o=+((u=t.querySelector('[name="rating"]:checked'))==null?void 0:u.value)||0,r=t.querySelector('[name="email"]').value.trim(),n=t.querySelector('[name="comment"]').value.trim();if(!o||!r||!n){iziToast.error({message:"Будь ласка, заповніть всі поля"});return}if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(r)){iziToast.error({message:"Введіть коректний email"});return}fetch("https://httpbin.org/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:o,email:r,comment:n})}).then(h=>{if(!h.ok)throw new Error("Не вдалося надіслати оцінку");M(),iziToast.success({message:"Дякуємо за вашу оцінку!"})}).catch(h=>{iziToast.error({message:h.message})})}L==null||L.addEventListener("click",M);function M(){l==null||l.classList.add("hidden"),f()}const ae=document.getElementById("burger"),S=document.getElementById("mobileMenu"),ie=document.getElementById("closeMenu");document.addEventListener("DOMContentLoaded",()=>{Y(),A.loadAnimation({container:document.getElementById("loader"),renderer:"svg",loop:!0,autoplay:!0,path:"/animations/loader.json"})});ae.addEventListener("click",()=>{S.classList.add("active")});ie.addEventListener("click",()=>{S.classList.remove("active")});window.addEventListener("scroll",_);p.scrollToTopBtn.addEventListener("click",O);const g=document.querySelector("#subscribe-form");g&&g.addEventListener("submit",async e=>{e.preventDefault();try{const t=g.email.value;await z(t),g.reset()}catch(t){console.log(t)}});document.getElementById("black-btn").addEventListener("click",async()=>{blackLoader.show(),await new Promise(e=>setTimeout(e,3e3)),blackLoader.hide()});
//# sourceMappingURL=index.js.map
