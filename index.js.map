{"version":3,"file":"index.js","sources":["../src/js/services/api/subscriptions-api.js","../src/js/services/subscriptions.js","../src/js/constants/refs.js","../src/js/services/scroll.js","../src/js/services/axios-loader.js","../src/main.js"],"sourcesContent":["import axios from '../../config/axios';\n\nexport const createSubscription = async email => {\n  const { data } = await axios.post('/subscription', { email });\n\n  return data;\n};\n","import { iziToast } from '../config/izi-toast.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { iziToastOptions } from '../constants/izi-toast.js';\n\nimport * as api from './api/subscriptions-api.js';\nimport * as errorMessages from '../constants/error-messages.js';\n\nexport const handleSubscription = async email => {\n  try {\n    const { message } = await api.createSubscription(email);\n    iziToast.show({\n      ...iziToastOptions.success,\n      message,\n      timeout: 5000,\n    });\n\n    return message;\n  } catch (error) {\n    const { status } = error;\n    const message =\n      errorMessages.createSubscriptionErrs[status] ||\n      `Unexpected error (${error.message || 'unknown'})`;\n\n    iziToast.show({\n      ...iziToastOptions.error,\n      message,\n    });\n\n    throw {\n      code: status,\n      message: message,\n    };\n  }\n};\n","export const refs = {\n  scrollToTopBtn: document.querySelector('.js-scroll-to-top-btn'),\n};\n","import { refs } from '../constants/refs';\n\nexport function handleScrollForScrollTopBtn() {\n  const scrollThreshold = window.innerHeight / 4;\n\n  if (window.scrollY > scrollThreshold) {\n    refs.scrollToTopBtn.classList.remove('invisible');\n  } else {\n    refs.scrollToTopBtn.classList.add('invisible');\n  }\n}\n\nexport function scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n","import axios from 'axios';\n\nfunction showLoader() {\n  const el = document.getElementById('loader-overlay');\n  if (el) el.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  const el = document.getElementById('loader-overlay');\n  if (el) el.style.display = 'none';\n}\n\n// Затримка перед хованням лоадера\nfunction delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n// Request interceptor — показуємо лоадер\naxios.interceptors.request.use(\n  config => {\n    showLoader();\n    return config;\n  },\n  error => {\n    hideLoader();\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor — чекаємо, потім ховаємо\naxios.interceptors.response.use(\n  async response => {\n    await delay(1000); // ← тут затримка (в мс)\n    hideLoader();\n    return response;\n  },\n  async error => {\n    await delay(1000); // ← і в разі помилки теж\n    hideLoader();\n    return Promise.reject(error);\n  }\n);\n\nexport default axios;\n","import { handleSubscription } from './js/services/subscriptions';\nimport { refs } from './js/constants/refs';\nimport { handleScrollForScrollTopBtn, scrollToTop } from './js/services/scroll';\nimport lottie from 'lottie-web';\n\nconst burger = document.getElementById('burger');\nconst mobileMenu = document.getElementById('mobileMenu');\nconst closeMenu = document.getElementById('closeMenu');\n\nburger.addEventListener('click', () => {\n  mobileMenu.classList.add('active');\n});\n\ncloseMenu.addEventListener('click', () => {\n  mobileMenu.classList.remove('active');\n});\n\nwindow.addEventListener('scroll', handleScrollForScrollTopBtn);\nrefs.scrollToTopBtn.addEventListener('click', scrollToTop);\n\nconst subscribeForm = document.querySelector('#subscribe-form');\nif (subscribeForm) {\n  subscribeForm.addEventListener('submit', async event => {\n    event.preventDefault();\n    try {\n      const email = subscribeForm.email.value;\n      await handleSubscription(email);\n      subscribeForm.reset();\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n\n// ініціалізація loader\nlottie.loadAnimation({\n  container: document.getElementById('loader'),\n  renderer: 'svg',\n  loop: true,\n  autoplay: true,\n  path: '/animations/loader.json',\n});\n\n//лише для тесту\nimport axios from './js/services/axios-loader.js';\ndocument.getElementById('load-btn').addEventListener('click', async () => {\n  try {\n    const response = await axios.get(\n      'https://jsonplaceholder.typicode.com/posts/1'\n    );\n\n    console.log('Дані з API отримано: ' + response.data.title);\n  } catch (err) {\n    console.error('Помилка при запиті:', err);\n  }\n});\n"],"names":["createSubscription","email","data","axios","handleSubscription","message","api.createSubscription","iziToast","iziToastOptions","error","status","errorMessages.createSubscriptionErrs","refs","handleScrollForScrollTopBtn","scrollThreshold","scrollToTop","showLoader","el","hideLoader","delay","ms","resolve","config","response","burger","mobileMenu","closeMenu","subscribeForm","event","lottie","err"],"mappings":"6HAEO,MAAMA,EAAqB,MAAMC,GAAS,CAC/C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,KAAK,gBAAiB,CAAE,MAAAF,CAAK,CAAE,EAE5D,OAAOC,CACT,ECCaE,EAAqB,MAAMH,GAAS,CAC/C,GAAI,CACF,KAAM,CAAE,QAAAI,CAAS,EAAG,MAAMC,EAAuBL,CAAK,EACtD,OAAAM,EAAS,KAAK,CACZ,GAAGC,EAAgB,QACnB,QAAAH,EACA,QAAS,GACf,CAAK,EAEMA,CACR,OAAQI,EAAO,CACd,KAAM,CAAE,OAAAC,CAAQ,EAAGD,EACbJ,EACJM,EAAqCD,CAAM,GAC3C,qBAAqBD,EAAM,SAAW,SAAS,IAEjD,MAAAF,EAAS,KAAK,CACZ,GAAGC,EAAgB,MACnB,QAAAH,CACN,CAAK,EAEK,CACJ,KAAMK,EACN,QAASL,CACf,CACG,CACH,ECjCaO,EAAO,CAClB,eAAgB,SAAS,cAAc,uBAAuB,CAChE,ECAO,SAASC,GAA8B,CAC5C,MAAMC,EAAkB,OAAO,YAAc,EAEzC,OAAO,QAAUA,EACnBF,EAAK,eAAe,UAAU,OAAO,WAAW,EAEhDA,EAAK,eAAe,UAAU,IAAI,WAAW,CAEjD,CAEO,SAASG,GAAc,CAC5B,OAAO,SAAS,CACd,IAAK,EACL,SAAU,QACd,CAAG,CACH,CCfA,SAASC,GAAa,CACpB,MAAMC,EAAK,SAAS,eAAe,gBAAgB,EAC/CA,IAAIA,EAAG,MAAM,QAAU,OAC7B,CAEA,SAASC,GAAa,CACpB,MAAMD,EAAK,SAAS,eAAe,gBAAgB,EAC/CA,IAAIA,EAAG,MAAM,QAAU,OAC7B,CAGA,SAASE,EAAMC,EAAI,CACjB,OAAO,IAAI,QAAQC,GAAW,WAAWA,EAASD,CAAE,CAAC,CACvD,CAGAjB,EAAM,aAAa,QAAQ,IACzBmB,IACEN,IACOM,GAETb,IACES,IACO,QAAQ,OAAOT,CAAK,EAE/B,EAGAN,EAAM,aAAa,SAAS,IAC1B,MAAMoB,IACJ,MAAMJ,EAAM,GAAI,EAChBD,IACOK,GAET,MAAMd,IACJ,MAAMU,EAAM,GAAI,EAChBD,IACO,QAAQ,OAAOT,CAAK,EAE/B,ECpCA,MAAMe,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAY,SAAS,eAAe,WAAW,EAErDF,EAAO,iBAAiB,QAAS,IAAM,CACrCC,EAAW,UAAU,IAAI,QAAQ,CACnC,CAAC,EAEDC,EAAU,iBAAiB,QAAS,IAAM,CACxCD,EAAW,UAAU,OAAO,QAAQ,CACtC,CAAC,EAED,OAAO,iBAAiB,SAAUZ,CAA2B,EAC7DD,EAAK,eAAe,iBAAiB,QAASG,CAAW,EAEzD,MAAMY,EAAgB,SAAS,cAAc,iBAAiB,EAC1DA,GACFA,EAAc,iBAAiB,SAAU,MAAMC,GAAS,CACtDA,EAAM,eAAc,EACpB,GAAI,CACF,MAAM3B,EAAQ0B,EAAc,MAAM,MAClC,MAAMvB,EAAmBH,CAAK,EAC9B0B,EAAc,MAAK,CACpB,OAAQlB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACL,CAAG,EAIHoB,EAAO,cAAc,CACnB,UAAW,SAAS,eAAe,QAAQ,EAC3C,SAAU,MACV,KAAM,GACN,SAAU,GACV,KAAM,yBACR,CAAC,EAID,SAAS,eAAe,UAAU,EAAE,iBAAiB,QAAS,SAAY,CACxE,GAAI,CACF,MAAMN,EAAW,MAAMpB,EAAM,IAC3B,8CACN,EAEI,QAAQ,IAAI,wBAA0BoB,EAAS,KAAK,KAAK,CAC1D,OAAQO,EAAK,CACZ,QAAQ,MAAM,sBAAuBA,CAAG,CACzC,CACH,CAAC"}